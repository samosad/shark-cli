#!/usr/bin/env node

'use strict';

process.title = 'shark';

var findFilePathRecursive = require('../lib/find-recursive');
var spawnHarmonyProcess   = require('../lib/spawn-harmony-process');
var isNodeVersionValid    = require('../lib/check-node-version');

if (!isNodeVersionValid(0, 11, 14)) {
  console.error('Shark requires Node >=0.11.14, current version is', process.version);
  process.exit(1);
}

var configFileName = 'sharkfile.js';
var configFilePath = findFilePathRecursive(process.cwd(), configFileName);

if (configFilePath) {
  spawnHarmonyProcess(configFilePath);
}
else {
  console.error(configFileName, 'not found');
}
